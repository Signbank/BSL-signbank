{% extends "baselayout.html" %}
{% load extras %}
{% block pagetitle %}{{ settings_site_title }} - Sign feature search {% endblock %}
{% block jqueryready %}
{% endblock %}

{% block extrajs %}
<script>
$(function() {
  // Replace the dropdown list with an image map we can click to pick a handshape
  $("#handshape_dropdown").show();
  $("#id_handshape").hide();
  // Fill in the existing handshape for this search
  var existing = $("#id_handshape option:selected").text();
  if (existing == 'No Value Set') {
    existing = 'Any Handshape';
  }
  $('#dropdown_menu_handshape span.content').text(existing);
  // Copy the alt tag to title for a little label tooltip on compatible browsers
  // Also fill in the href with something meaningful
  $("#handshape-map area").each(function(event) {
    var pickAlt = $(this).prop('alt');
    $(this).prop('title', pickAlt);
    $(this).prop('href', '#handshape-' + pickAlt);
  });
  // When we click the image map fill the select value and display a meaningful value
  $("#handshape-map area").click(function(event) {
    event.preventDefault();
    var pickVal = $(this).data('pick');
    var pickAlt = $(this).prop('alt');
    if (pickVal == undefined) {
      pickVal = 'notset';
      pickAlt = 'Any Handshape';
    }
    $('#id_handshape').val(pickVal);
    $('#dropdown_menu_handshape span.content').text(pickAlt);
  });


  // Replace the dropdown list with an image map we can click to pick a location
  $("#location_dropdown").show();
  $("#id_location").hide();
  // Fill in the existing location for this search
  var existing = $("#id_location option:selected").text();
  if (existing == 'No Value Set') {
    existing = 'Any Location';
  }
  $('#dropdown_menu_location span.content').text(existing);
  // Copy the alt tag to title for a little label tooltip on compatible browsers
  // Also fill in the href with something meaningful
  $("#location-map area").each(function(event) {
    var pickAlt = $(this).prop('alt');
    $(this).prop('title', pickAlt);
    $(this).prop('href', '#location-' + pickAlt);
  });
  // When we click the image map fill the select value and display a meaningful value
  $("#location-map area").click(function(event) {
    event.preventDefault();
    var pickVal = $(this).data('pick');
    var pickAlt = $(this).prop('alt');
    if (pickVal == undefined) {
      pickVal = '-1';
      pickAlt = 'Any Location';
    }
    $('#id_location').val(pickVal);
    $('#dropdown_menu_location span.content').text(pickAlt);
  });
});
</script>
{% endblock %}



{% block content %}

    <p>Welcome to the Sign Feature Search section of the {{language}} SignBank. Here
      you can search for a sign using the initial hand shape or location and,
      optionally, an English keyword or start of an English word.</p>	
    
    <div class="searchblock">
      <form role="search" id="featureSearch" name="featureSearch" method="get" action="/dictionary/featuresearch">
         <div>
            <div class="dropdown" id="handshape_dropdown" style="display: none;">
              <button class="btn btn-default dropdown-toggle" type="button" id="dropdown_menu_handshape" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="content">Any Handshape</span>
                <span class="caret"></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdown_menu_handshape">
                <img id="handshape-select" src="{{ STATIC_URL }}images/handshapes.png" alt="" usemap="#handshape-map" />
                <map name="handshape-map" id="handshape-map">

                  <area alt="Round" data-pick="0.1" href="#"
                    shape="rect" coords="0,0,74,50" />
                  <area alt="Okay" data-pick="0.2" href="#"
                    shape="rect" coords="74,0,160,50" />
                  <area alt="Point" data-pick="1.1" href="#"
                    shape="rect" coords="160,0,260,50" />
                  <area alt="Hook" data-pick="1.2" href="#"
                    shape="rect" coords="260,0,320,50" />
                  <area alt="Two" data-pick="2.1" href="#"
                    shape="rect" coords="320,0,400,50" />
                  <area alt="Kneel" data-pick="2.2" href="#"
                    shape="rect" coords="400,0,470,50" />
                  <area alt="Perth" data-pick="2.3" href="#"
                    shape="rect" coords="470,0,540,50" />

                  <area alt="Spoon" data-pick="2.4" href="#"
                    shape="rect" coords="0,50,74,90" />
                  <area alt="Letter-n" data-pick="2.5" href="#"
                    shape="rect" coords="74,50,160,90" />
                  <area alt="Wish" data-pick="2.6" href="#"
                    shape="rect" coords="160,50,260,90" />
                  <area alt="Three" data-pick="3.1" href="#"
                    shape="rect" coords="260,50,320,90" />
                  <area alt="Mother" data-pick="3.2" href="#"
                    shape="rect" coords="320,50,400,90" />
                  <area alt="Letter-m" data-pick="3.3" href="#"
                    shape="rect" coords="400,50,470,90" />
                  <area alt="Four" data-pick="4.1" href="#"
                    shape="rect" coords="470,50,540,90" />

                  <area alt="Spread" data-pick="5.1" href="#"
                    shape="rect" coords="0,90,74,130" />
                  <area alt="Ball" data-pick="5.2" href="#"
                    shape="rect" coords="74,90,160,130" />
                  <area alt="Flat" data-pick="5.3" href="#"
                    shape="rect" coords="160,90,260,130" />
                  <area alt="Thick" data-pick="5.4" href="#"
                    shape="rect" coords="260,90,320,130" />
                  <area alt="Cup" data-pick="5.5" href="#"
                    shape="rect" coords="320,90,400,130" />
                  <area alt="Good" data-pick="6.1" href="#"
                    shape="rect" coords="400,90,470,130" />
                  <area alt="Bad" data-pick="6.2" href="#"
                    shape="rect" coords="470,90,540,130" />

                  <area alt="Gun" data-pick="7.1" href="#"
                    shape="rect" coords="0,130,74,170" />
                  <area alt="Letter-c" data-pick="7.2" href="#"
                    shape="rect" coords="74,130,160,170" />
                  <area alt="Small" data-pick="7.3" href="#"
                    shape="rect" coords="160,130,260,170" />
                  <area alt="Seven" data-pick="7.4" href="#"
                    shape="rect" coords="260,130,320,170" />
                  <area alt="Eight" data-pick="8.1" href="#"
                    shape="rect" coords="320,130,400,170" />
                  <area alt="Nine" data-pick="9.1" href="#"
                    shape="rect" coords="400,130,470,170" />
                  <area alt="Fist" data-pick="10.1" href="#"
                    shape="rect" coords="470,130,540,170" />

                  <area alt="Soon" data-pick="10.2" href="#"
                    shape="rect" coords="0,170,74,210" />
                  <area alt="Ten" data-pick="10.3" href="#"
                    shape="rect" coords="74,170,160,210" />
                  <area alt="Write" data-pick="11.1" href="#"
                    shape="rect" coords="160,170,260,210" />
                  <area alt="Salt" data-pick="12.1" href="#"
                    shape="rect" coords="260,170,320,210" />
                  <area alt="Middle" data-pick="13.1" href="#"
                    shape="rect" coords="320,170,400,210" />
                  <area alt="Rude" data-pick="14.1" href="#"
                    shape="rect" coords="400,170,470,210" />
                  <area alt="Ambivalent" data-pick="15.1" href="#"
                    shape="rect" coords="470,170,540,210" />

                  <area alt="Love" data-pick="16.1" href="#"
                    shape="rect" coords="0,210,74,256" />
                  <area alt="Animal" data-pick="17.1" href="#"
                    shape="rect" coords="74,210,160,256" />
                  <area alt="Fourteen" data-pick="18.1" href="#"
                    shape="rect" coords="160,210,260,256" />
                  
                  <area alt="Any Handshape" data-pick="notset" href="#"
                    shape="rect" coords="0,0,540,256" />

                </map>
              </div>
            </div>

            {{form.handshape}}
         </div>

         <div>
            <div class="dropdown" id="location_dropdown" style="display: none;">
              <button class="btn btn-default dropdown-toggle" type="button" id="dropdown_menu_location" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="content">Any Location</span>
                <span class="caret"></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdown_menu_location">
                <img id="location-select" src="{{ STATIC_URL }}images/locations.png" alt="" usemap="#location-map" />
                <map name="location-map" id="location-map">

                  <area alt="Top of head" data-pick="1" href="#"
                    shape="rect" coords="20,52,122,78" />
                  <area alt="Upper face (forehead/temple)" data-pick="2" href="#"
                    shape="rect" coords="20,83,122,108" />
                  <area alt="Nose" data-pick="5" href="#"
                    shape="rect" coords="64,124,79,151" />
                  <area alt="Eye" data-pick="4" href="#"
                    shape="rect" coords="36,114,106,132" />
                  <area alt="Whole of face" data-pick="6" href="#"
                    shape="rect" coords="214,20,307,122" />
                  <area alt="Ear or side of head" data-pick="8" href="#"
                    shape="rect" coords="18,114,35,152" />
                  <area alt="Ear or side of head" data-pick="8" href="#"
                    shape="rect" coords="111,113,126,148" />
                  <area alt="Cheek" data-pick="9" href="#"
                    shape="rect" coords="38,138,53,168" />
                  <area alt="Cheek" data-pick="9" href="#"
                    shape="rect" coords="90,137,107,167" />
                  <area alt="Mouth and lips" data-pick="10" href="#"
                    shape="rect" coords="58,155,84,166" />
                  <area alt="Chin" data-pick="11" href="#"
                    shape="rect" coords="58,170,86,183" />
                  <area alt="Neck" data-pick="12" href="#"
                    shape="rect" coords="228,125,289,144" />
                  <area alt="Shoulder" data-pick="13" href="#"
                    shape="rect" coords="169,142,215,187" />
                  <area alt="Shoulder" data-pick="13" href="#"
                    shape="rect" coords="301,140,348,188" />
                  <area alt="Chest" data-pick="14" href="#"
                    shape="rect" coords="221,148,292,213" />
                  <area alt="High neutral space" data-pick="28" href="#"
                    shape="rect" coords="482,124,512,185" />
                  <area alt="Stomach" data-pick="15" href="#"
                    shape="rect" coords="222,222,290,259" />
                  <area alt="Neutral space" data-pick="29" href="#"
                    shape="rect" coords="482,207,512,362" />
                  <area alt="Waist" data-pick="16" href="#"
                    shape="rect" coords="220,267,292,302" />
                  <area alt="Below waist" data-pick="17" href="#"
                    shape="rect" coords="213,312,298,415" />
                  <area alt="Upper arm" data-pick="18" href="#"
                    shape="rect" coords="169,192,214,251" />
                  <area alt="Upper arm" data-pick="18" href="#"
                    shape="rect" coords="301,193,346,249" />
                  <area alt="Elbow" data-pick="19" href="#"
                    shape="rect" coords="169,256,214,300" />
                  <area alt="Elbow" data-pick="19" href="#"
                    shape="rect" coords="300,256,347,300" />
                  <area alt="Pronated forearm" data-pick="20" href="#"
                    shape="rect" coords="161,306,206,368" />
                  <area alt="Supinated forearm" data-pick="21" href="#"
                    shape="rect" coords="306,306,355,361" />
                  <area alt="Pronated wrist" data-pick="22" href="#"
                    shape="rect" coords="152,371,190,390" />
                  <area alt="Supinated wrist" data-pick="23" href="#"
                    shape="rect" coords="317,368,355,390" />

                  <area alt="Any Location" data-pick="-1" href="#"
                    shape="rect" coords="0,0,536,493" />

                </map>
              </div>
            </div>


            {{form.location}}
         </div>
         
          <div>
            <input class="form-control query" placeholder="Enter keywords (optional)" type="Text" id="query" name="query" value="{{ query }}" maxlength="50">
         </div>

         <div class="form-group">
            <button type="submit" class="btn btn-default">Sign Search</button>
         </div>
       
      </form>
    </div>










{% if query_valid and glosscount > 0 %}
    <div id='publicsign' class="view-featuresearch">
        <div id="signinfo" class="navbar navbar-default navbar-collapse">
        
            <div class="pull-right">
                <span class='navbar-text'>{{glosscount}} matches</span>
                <div class='btn-group'>
                {% for p in page_range %}
                    {% ifequal p page.number %}
                    <button type="button" class="btn btn-primary navbar-btn">{{p}}</button>
                    {% else %}{% ifequal p '...' %}
                    <span type="button" class="btn disabled navbar-btn">{{p}}</span>
                    {% else %}
                    <a type="button" class="btn btn-default navbar-btn"
                      href="?handshape={{handshape}}&location={{location}}&query={{query}}&page={{p}}">{{p}}</a>
                    {% endifequal %}{% endifequal %}
                {% endfor %}
                </div>
            </div>
        
        </div>

        <div id="definitionblock">
            <div class='col-md-4 region-left'>
                <div id="videocontainer">
                   <div id="player">
                      <iframe id='videoiframe' scrolling="no" frameborder='0' allowfullscreen="allowfullscreen"
                              src="{% url 'signbank.video.views.iframe' gloss.pk %}">
                      </iframe>
                   </div>
                   <div id="replay"></div>
                </div>
            
            
                <div id="keywords">
                     <p><strong>Keywords:</strong>
                     {% for kwd in gloss.translation_set.all %}
                       {{ kwd.translation|highlight:query }}{% if not forloop.last %},{% endif %}
                     {% endfor %}
                     </p>
                </div>

                <div id="feedback">
                    <ul>
                      <li><a href="{% url 'root_page' %}feedback/gloss/{{gloss.idgloss}}.html?return=/dictionary/gloss/{{gloss.idgloss}}.html&lastmatch={{lastmatch}}">Provide feedback about this sign</a></li>
                      <li><a href="{% url 'root_page' %}feedback/missingsign.html">Report a missing sign</a></li>
                      <li><a href="{% url 'root_page' %}feedback/generalfeedback.html">Provide general site feedback</a></li>
                    </ul>
                </div>
            </div>

        </div>

    </div>
{% endif %}



{% endblock %}




