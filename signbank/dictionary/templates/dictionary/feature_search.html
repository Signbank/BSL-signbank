{% extends "baselayout.html" %}
{% load extras %}
{% block pagetitle %}{{ settings_site_title }} - Sign feature search {% endblock %}
{% block jqueryready %}
{% endblock %}

{% block extrajs %}
<script>
$(function() {
  // Replace the dropdown list with an image map we can click to pick a handshape
  $("#handshape_dropdown").show();
  $("#id_handshape").hide();
  // Fill in the existing handshape for this search
  var existing = $("#id_handshape option:selected").text();
  if (existing == 'No Value Set') {
    existing = 'Any Handshape';
  }
  $('#dropdown_menu_handshape span.content').text(existing);
  // Copy the alt tag to title for a little label tooltip on compatible browsers
  // Also fill in the href with something meaningful
  $("#handshape-map area").each(function(event) {
    var pickAlt = $(this).prop('alt');
    $(this).prop('title', pickAlt);
    $(this).prop('href', '#handshape-' + pickAlt);
  });
  // When we click the image map fill the select value and display a meaningful value
  $("#handshape-map area").click(function(event) {
    event.preventDefault();
    var pickVal = $(this).data('pick');
    var pickAlt = $(this).prop('alt');
    if (pickVal == undefined) {
      pickVal = 'notset';
      pickAlt = 'Any Handshape';
    }
    $('#id_handshape').val(pickVal);
    $('#dropdown_menu_handshape span.content').text(pickAlt);
  });


  // Replace the dropdown list with an image map we can click to pick a location
  $("#location_dropdown").show();
  $("#id_location").hide();
  // Fill in the existing location for this search
  var existing = $("#id_location option:selected").text();
  if (existing == 'No Value Set') {
    existing = 'Any Location';
  }
  $('#dropdown_menu_location span.content').text(existing);
  // Copy the alt tag to title for a little label tooltip on compatible browsers
  // Also fill in the href with something meaningful
  $("#location-map area").each(function(event) {
    var pickAlt = $(this).prop('alt');
    $(this).prop('title', pickAlt);
    $(this).prop('href', '#location-' + pickAlt);
  });
  // When we click the image map fill the select value and display a meaningful value
  $("#location-map area").click(function(event) {
    event.preventDefault();
    var pickVal = $(this).data('pick');
    var pickAlt = $(this).prop('alt');
    if (pickVal == undefined) {
      pickVal = '-1';
      pickAlt = 'Any Location';
    }
    $('#id_location').val(pickVal);
    $('#dropdown_menu_location span.content').text(pickAlt);
  });
});
</script>
{% endblock %}



{% block content %}

    <p>Welcome to the Sign Feature Search section of the {{language}} SignBank. Here
      you can search for a sign using the initial hand shape or location and,
      optionally, an English keyword or start of an English word.</p>	
    
    <div class="searchblock">
      <form role="search" id="featureSearch" name="featureSearch" method="get" action="/dictionary/featuresearch">
         <div>
            <div class="dropdown" id="handshape_dropdown" style="display: none;">
              <button class="btn btn-default dropdown-toggle" type="button" id="dropdown_menu_handshape" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="content">Any Handshape</span>
                <span class="caret"></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdown_menu_handshape">
                <img id="handshape-select" src="{{ STATIC_URL }}images/handshapes.png" alt="" usemap="#handshape-map" />
                <map name="handshape-map" id="handshape-map">

                  <area alt="Round" data-pick="0.1" href="#"
                    shape="rect" coords="3,5,155,100" />
                  <area alt="Okay" data-pick="0.2" href="#"
                    shape="rect" coords="159,5,333,100" />
                  <area alt="Point" data-pick="1.1" href="#"
                    shape="rect" coords="341,5,534,100" />
                  <area alt="Hook" data-pick="1.2" href="#"
                    shape="rect" coords="536,5,665,100" />
                  <area alt="Two" data-pick="2.1" href="#"
                    shape="rect" coords="670,5,810,100" />
                  <area alt="Kneel" data-pick="2.2" href="#"
                    shape="rect" coords="817,5,981,100" />
                  <area alt="Perth" data-pick="2.3" href="#"
                    shape="rect" coords="985,5,1107,100" />

                  <area alt="Spoon" data-pick="2.4" href="#"
                    shape="rect" coords="3,101,155,180" />
                  <area alt="Letter-n" data-pick="2.5" href="#"
                    shape="rect" coords="159,101,333,180" />
                  <area alt="Wish" data-pick="2.6" href="#"
                    shape="rect" coords="341,101,534,180" />
                  <area alt="Three" data-pick="3.1" href="#"
                    shape="rect" coords="536,101,665,180" />
                  <area alt="Mother" data-pick="3.2" href="#"
                    shape="rect" coords="670,101,810,180" />
                  <area alt="Letter-m" data-pick="3.3" href="#"
                    shape="rect" coords="817,101,981,180" />
                  <area alt="Four" data-pick="4.1" href="#"
                    shape="rect" coords="985,101,1107,180" />

                  <area alt="Spread" data-pick="5.1" href="#"
                    shape="rect" coords="3,180,155,266" />
                  <area alt="Ball" data-pick="5.2" href="#"
                    shape="rect" coords="159,180,333,266" />
                  <area alt="Flat" data-pick="5.3" href="#"
                    shape="rect" coords="341,180,534,266" />
                  <area alt="Thick" data-pick="5.4" href="#"
                    shape="rect" coords="536,180,665,266" />
                  <area alt="Cup" data-pick="5.5" href="#"
                    shape="rect" coords="670,180,810,266" />
                  <area alt="Good" data-pick="6.1" href="#"
                    shape="rect" coords="817,180,981,266" />
                  <area alt="Bad" data-pick="6.2" href="#"
                    shape="rect" coords="985,180,1107,266" />

                  <area alt="Gun" data-pick="7.1" href="#"
                    shape="rect" coords="3,267,155,340" />
                  <area alt="Letter-c" data-pick="7.2" href="#"
                    shape="rect" coords="159,267,333,340" />
                  <area alt="Small" data-pick="7.3" href="#"
                    shape="rect" coords="341,267,534,340" />
                  <area alt="Seven" data-pick="7.4" href="#"
                    shape="rect" coords="536,267,665,340" />
                  <area alt="Eight" data-pick="8.1" href="#"
                    shape="rect" coords="670,267,810,340" />
                  <area alt="Nine" data-pick="9.1" href="#"
                    shape="rect" coords="817,267,981,340" />
                  <area alt="Fist" data-pick="10.1" href="#"
                    shape="rect" coords="985,267,1107,340" />

                  <area alt="Soon" data-pick="10.2" href="#"
                    shape="rect" coords="3,341,155,430" />
                  <area alt="Ten" data-pick="10.3" href="#"
                    shape="rect" coords="159,341,333,430" />
                  <area alt="Write" data-pick="11.1" href="#"
                    shape="rect" coords="341,341,534,430" />
                  <area alt="Salt" data-pick="12.1" href="#"
                    shape="rect" coords="536,341,665,430" />
                  <area alt="Middle" data-pick="13.1" href="#"
                    shape="rect" coords="670,341,810,430" />
                  <area alt="Rude" data-pick="14.1" href="#"
                    shape="rect" coords="817,341,981,430" />
                  <area alt="Ambivalent" data-pick="15.1" href="#"
                    shape="rect" coords="985,341,1107,430" />

                  <area alt="Love" data-pick="16.1" href="#"
                    shape="rect" coords="3,431,155,510" />
                  <area alt="Animal" data-pick="17.1" href="#"
                    shape="rect" coords="159,431,333,510" />
                  
                  <area alt="Any Handshape" data-pick="notset" href="#"
                    shape="rect" coords="0,0,1122,528" />

                </map>
              </div>
            </div>

            {{form.handshape}}
         </div>

         <div>
            <div class="dropdown" id="location_dropdown" style="display: none;">
              <button class="btn btn-default dropdown-toggle" type="button" id="dropdown_menu_location" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="content">Any Location</span>
                <span class="caret"></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdown_menu_location">
                <img id="location-select" src="{{ STATIC_URL }}images/locations.png" alt="" usemap="#location-map" />
                <map name="location-map" id="location-map">

                  <area alt="Top of head" data-pick="1" href="#"
                    shape="rect" coords="41,105,244,156" />
                  <area alt="Upper face (forehead/temple)" data-pick="2" href="#"
                    shape="rect" coords="40,167,245,216" />
                  <area alt="Nose" data-pick="5" href="#"
                    shape="rect" coords="129,249,159,302" />
                  <area alt="Eye" data-pick="4" href="#"
                    shape="rect" coords="73,228,212,264" />
                  <area alt="Whole of face" data-pick="6" href="#"
                    shape="rect" coords="428,40,615,244" />
                  <area alt="Ear or side of head" data-pick="8" href="#"
                    shape="rect" coords="37,228,70,305" />
                  <area alt="Ear or side of head" data-pick="8" href="#"
                    shape="rect" coords="222,226,252,297" />
                  <area alt="Cheek" data-pick="9" href="#"
                    shape="rect" coords="76,277,106,336" />
                  <area alt="Cheek" data-pick="9" href="#"
                    shape="rect" coords="180,275,214,335" />
                  <area alt="Mouth and lips" data-pick="10" href="#"
                    shape="rect" coords="117,310,169,333" />
                  <area alt="Chin" data-pick="11" href="#"
                    shape="rect" coords="116,340,173,367" />
                  <area alt="Neck" data-pick="12" href="#"
                    shape="rect" coords="457,250,578,289" />
                  <area alt="Shoulder" data-pick="13" href="#"
                    shape="rect" coords="339,285,430,374" />
                  <area alt="Shoulder" data-pick="13" href="#"
                    shape="rect" coords="602,280,696,377" />
                  <area alt="Chest" data-pick="14" href="#"
                    shape="rect" coords="443,297,584,426" />
                  <area alt="High neutral space" data-pick="28" href="#"
                    shape="rect" coords="965,249,1025,371" />
                  <area alt="Stomach" data-pick="15" href="#"
                    shape="rect" coords="444,445,581,519" />
                  <area alt="Neutral space" data-pick="29" href="#"
                    shape="rect" coords="965,415,1024,724" />
                  <area alt="Waist" data-pick="16" href="#"
                    shape="rect" coords="441,535,584,605" />
                  <area alt="Below waist" data-pick="17" href="#"
                    shape="rect" coords="427,625,596,830" />
                  <area alt="Upper arm" data-pick="18" href="#"
                    shape="rect" coords="338,385,429,502" />
                  <area alt="Upper arm" data-pick="18" href="#"
                    shape="rect" coords="602,386,692,499" />
                  <area alt="Elbow" data-pick="19" href="#"
                    shape="rect" coords="339,513,429,601" />
                  <area alt="Elbow" data-pick="19" href="#"
                    shape="rect" coords="600,513,694,601" />
                  <area alt="Pronated forearm" data-pick="20" href="#"
                    shape="rect" coords="323,612,413,736" />
                  <area alt="Supinated forearm" data-pick="21" href="#"
                    shape="rect" coords="613,612,710,722" />
                  <area alt="Pronated wrist" data-pick="22" href="#"
                    shape="rect" coords="305,742,380,781" />
                  <area alt="Supinated wrist" data-pick="23" href="#"
                    shape="rect" coords="635,737,711,781" />

                  <area alt="Any Location" data-pick="-1" href="#"
                    shape="rect" coords="0,0,1072,986" />

                </map>
              </div>
            </div>


            {{form.location}}
         </div>
         
          <div>
            <input class="form-control query" placeholder="Enter keywords (optional)" type="Text" id="query" name="query" value="{{ query }}" maxlength="50">
         </div>

         <div class="form-group">
            <button type="submit" class="btn btn-default">Sign Search</button>
         </div>
       
      </form>
    </div>











    <div id='publicsign' class="view-featuresearch">
        <div id="signinfo" class="navbar navbar-default navbar-collapse">
        
            <div class="pull-right">
                <span class='navbar-text'>{{glosscount}} matches</span>
                <div class='btn-group'>
                {% for p in page_range %}
                    {% ifequal p page.number %}
                    <button type="button" class="btn btn-primary navbar-btn">{{p}}</button>
                    {% else %}{% ifequal p '...' %}
                    <span type="button" class="btn disabled navbar-btn">{{p}}</span>
                    {% else %}
                    <a type="button" class="btn btn-default navbar-btn"
                      href="?handshape={{handshape}}&location={{location}}&query={{query}}&page={{p}}">{{p}}</a>
                    {% endifequal %}{% endifequal %}
                {% endfor %}
                </div>
            </div>
        
        </div>

        <div id="definitionblock">
            <div class='col-md-4 region-left'>
                <div id="videocontainer">
                   <div id="player">
                      <iframe id='videoiframe' scrolling="no" frameborder='0' allowfullscreen="allowfullscreen"
                              src="{% url 'signbank.video.views.iframe' gloss.pk %}">
                      </iframe>
                   </div>
                   <div id="replay"></div>
                </div>
            
            
                <div id="keywords">
                     <p><strong>Keywords:</strong>
                     {% for kwd in gloss.translation_set.all %}
                       {{ kwd.translation|highlight:query }}{% if not forloop.last %},{% endif %}
                     {% endfor %}
                     </p>
                </div>

                <div id="feedback">
                    <ul>
                      <li><a href="{% url 'root_page' %}feedback/gloss/{{gloss.idgloss}}.html?return=/dictionary/gloss/{{gloss.idgloss}}.html&lastmatch={{lastmatch}}">Provide feedback about this sign</a></li>
                      <li><a href="{% url 'root_page' %}feedback/missingsign.html">Report a missing sign</a></li>
                      <li><a href="{% url 'root_page' %}feedback/generalfeedback.html">Provide general site feedback</a></li>
                    </ul>
                </div>
            </div>

        </div>

    </div>




{% endblock %}




